## ADDED Requirements

### Requirement: Player character creation
The player SHALL create a character by choosing a name, class, and rolling ability scores. Ability scores SHALL be generated by rolling 4d6 and dropping the lowest die, for each of the 6 abilities (STR, DEX, CON, INT, WIS, CHA). The player starts at level 1 on floor 1.

#### Scenario: Character creation
- **WHEN** a new game starts with class "rogue" and name "Shadow"
- **THEN** the engine generates 6 ability scores via 4d6-drop-lowest, creates a level 1 Rogue with class-appropriate starting equipment, and places them at the floor 1 entrance

### Requirement: Four playable classes
The game SHALL support exactly 4 classes: Fighter, Rogue, Cleric, and Wizard. Each class SHALL have a unique hit die, armor/weapon proficiencies, and class features that unlock at specific levels.

#### Scenario: Fighter class
- **WHEN** a Fighter is created
- **THEN** they have hit die d10, proficiency with all weapons and armor, and start with a longsword, chain mail, and shield

#### Scenario: Rogue class
- **WHEN** a Rogue is created
- **THEN** they have hit die d8, proficiency with light armor and finesse weapons, trap detection/disarm ability, lock picking, and sneak attack (bonus damage from stealth)

#### Scenario: Cleric class
- **WHEN** a Cleric is created
- **THEN** they have hit die d8, proficiency with medium armor and simple weapons, spell slots for Cleric spells, and Turn Undead ability

#### Scenario: Wizard class
- **WHEN** a Wizard is created
- **THEN** they have hit die d6, no armor proficiency, proficiency with daggers and staves, spell slots for Wizard spells, and Detect Magic ability

### Requirement: Class features by level
Each class SHALL gain abilities at specific levels:
- **Fighter**: Extra Attack at level 5 (two attacks per turn), Action Surge at level 3 (one extra action once per rest)
- **Rogue**: Sneak Attack scales with level (1d6 at 1, 2d6 at 3, 3d6 at 5, 4d6 at 7, 5d6 at 9), Evasion at level 7 (half damage on failed DEX save, none on success)
- **Cleric**: Turn Undead at level 1 (WIS save or undead flee), Destroy Undead at level 5 (low-CR undead destroyed), spell slot progression
- **Wizard**: Arcane Recovery at level 1 (regain one spell slot on short rest), spell slot progression, new spells at each level

#### Scenario: Fighter Extra Attack
- **WHEN** a level 5 Fighter chooses the attack action
- **THEN** they make two attack rolls instead of one

### Requirement: Ability modifiers
Each ability score SHALL produce a modifier: (score - 10) / 2, rounded down. Modifiers affect attack rolls (STR for melee, DEX for ranged/finesse), AC (DEX), HP (CON per level), spell DC (INT for Wizard, WIS for Cleric), and saving throws.

#### Scenario: Ability modifier calculation
- **WHEN** a character has STR 16
- **THEN** their STR modifier is +3, applied to melee attack and damage rolls

### Requirement: Inventory and equipment
The player SHALL have an inventory with equipped slots (weapon, armor, shield, ring, amulet) and a backpack (up to 20 items). Equipping/unequipping costs one turn action. Items in backpack are accessible via the inventory screen.

#### Scenario: Equip a weapon
- **WHEN** the player uses the equip action on a "Mace +1" from their backpack
- **THEN** the current weapon goes to backpack, Mace +1 becomes equipped, and the turn advances

### Requirement: Monster definitions
The game SHALL include 36 monster types across 4 tiers. Each monster SHALL have: name, tier, HP, AC, attack bonus, damage die, speed, XP value, loot table reference, and one or more behavior tags.

#### Scenario: Monster stat block
- **WHEN** a Troll is instantiated
- **THEN** it has Tier 3 stats (HP ~60, AC 15, attacks for 2d6+4), behavior tags [Regenerator], and regenerates 5 HP per turn unless damaged by fire

### Requirement: Monster behavior tags
Each monster SHALL have behavior tags that determine its AI: Ambusher (surprise round), Berserker (+damage when hurt), Caster (uses spells), Charger (double damage on corridor charge), Corroder (damages equipment), Engulfer (auto-engulf in corridor), Fleeing (runs when low HP), Pack (bonus with allies), Paralyzer (stun on hit), Phaser (moves through walls), Poisoner (poison on hit), Regenerator (heals per turn), Shielded (high AC, riposte), Summoner (spawns allies), Swooper (high AC, low HP).

#### Scenario: Pack behavior
- **WHEN** 3 Giant Rats (tag: Pack) are in combat
- **THEN** each rat gets +1 to attack rolls per other allied rat in the fight

#### Scenario: Fleeing behavior
- **WHEN** a Kobold (tag: Fleeing) drops below 25% HP
- **THEN** it attempts to move away from the player instead of attacking
